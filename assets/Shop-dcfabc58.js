import{I as P,_ as w}from"./info-cb75e04a.js";import{_ as x,l as y,A as S,o as n,c as h,a as t,B as F,C,Q as I,D as a,G as T,b as r,I as l,t as u,E as k,F as g,r as v,d as z,n as f,p as B,g as V,e as D}from"./index-a5c14a1a.js";const $="/assets/previous-cac261b0.png",O="/assets/next-9bc718b2.png";const U={data(){return{isLoading:!0,items:{},itemsOfCurrentPage:{},category:"",minPrice:"",maxPrice:"",size:"",priceFilter:"",showFilterText:"",sortDataBy:"newArrivals",optionsSortData:[{text:"Mới nhất",value:"newArrivals"},{text:"Bán chạy",value:"topSale"},{text:"Giá: Thấp đến Cao",value:"lowToHight"},{text:"Giá: Cao đến Thấp",value:"hightToLow"}],dataSorted:[],searchText:""}},watch:{$route(s,e){Object.keys(this.$route.query).length&&this.retrieveItems(this.$route.fullPath.slice(9)),this.setBackgroundImage()},priceFilter(){this.minPrice=this.priceFilter*5e4,this.priceFilter<5?this.maxPrice=this.minPrice+5e4:this.maxPrice=""},sortDataBy(){this.watchSortDataBy()}},computed:{hasData(){try{const s=this.dataSorted[0][0].image[0];return this.dataSorted[0][0].image[0]}catch{return!1}},numPageCurrent(){return this.$route.hash?this.$route.hash:""},showPageCurrent(){return this.numPageCurrent?parseInt(this.numPageCurrent.substr(5)):(this.$route.hash="#page1",1)},numPageOfItems(){if(!this.dataSorted)return[];let s=[];const e=this.dataSorted.length;for(let o=0;o<e;o++)s.push(o+1);return s},pageLinks(){if(this.numPageOfItems.length<=5)return this.numPageOfItems;if(this.showPageCurrent<=2)return[1,2,3,"...",this.numPageOfItems.length];if(this.showPageCurrent===3)return[1,2,3,4,"...",this.numPageOfItems.length];if(this.showPageCurrent===this.numPageOfItems.length)return[1,"...",this.showPageCurrent-2,this.showPageCurrent-1,this.showPageCurrent];if(this.showPageCurrent===this.numPageOfItems.length-1)return[1,"...",this.showPageCurrent-1,this.showPageCurrent,this.showPageCurrent+1];if(this.showPageCurrent===this.numPageOfItems.length-2)return[1,"...",this.showPageCurrent-1,this.showPageCurrent,this.showPageCurrent+1,this.showPageCurrent+2];{let s=[];return s.push(1),this.showPageCurrent-1>2&&s.push("..."),s.push(this.showPageCurrent-1),s.push(this.showPageCurrent),s.push(this.showPageCurrent+1),this.numPageOfItems.length-(this.showPageCurrent+1)!==1&&s.push("..."),s.push(this.numPageOfItems.length),s}},disablePreviousButton(){return this.showPageCurrent<=1},disableNextButton(){return this.showPageCurrent>=this.numPageOfItems.length}},methods:{async retrieveItems(s){try{this.isLoading=!0,this.items=await P.getData(s),this.watchSortDataBy();const e=setInterval(()=>{document.querySelectorAll("[lazy]").length>0&&(y(),clearInterval(e))},50);this.isLoading=!1}catch(e){console.log(e)}},findByText(){if(!this.searchText)return;let s={...this.$route.query,search:this.searchText};this.$router.push({name:"shop",query:s})},applyFilter(){let s={};this.showFilterText="",this.category&&(s.category=this.category,this.showFilterText=this.category+" "),this.maxPrice&&(s.maxPrice=this.maxPrice),(this.minPrice||this.minPrice===0)&&(s.minPrice=this.minPrice,this.maxPrice?this.showFilterText+=`[${this.minPrice}, ${this.maxPrice}] `:this.showFilterText+=` ${this.minPrice}+ `),this.size&&(s.size=this.size,this.showFilterText+=this.size),this.showFilterText&&(this.showFilterText="Lọc theo: "+this.showFilterText),this.$router.push({name:"shop",query:s})},clearFilter(){this.category="",this.maxPrice="",this.minPrice="",this.size="",this.priceFilter="",this.showFilterText="",document.querySelectorAll(".shop__sidebar__size label.active").forEach(e=>{e.classList.remove("active")}),Object.keys(this.$route.query).length!==0&&(this.retrieveItems(""),this.$router.push({name:"shop",query:{}}))},formatter(s){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s)},changePropertyFilter(s){for(const e in s)this[e]=s[e]},setBackgroundImage(s=""){let e=setInterval(()=>{let o=document.querySelectorAll("div.product__item__pic.set-bg");o.length>0&&(o.forEach((d,_)=>{d.style.backgroundImage!=='url("'+this.dataSorted[this.showPageCurrent-1][_].image[0]+'")'&&(d.dataset.setbg=this.dataSorted[this.showPageCurrent-1][_].image[0],d.setAttribute("lazy","")),_===o.length-1&&y(s)}),clearInterval(e))},10)},goDetailItem(s){this.$router.push({name:"shop-details",params:{id:s}})},watchSortDataBy(){if(this.sortDataBy==="newArrivals")return this.dataSorted=[],this.dataSorted.push(...this.items),this.setBackgroundImage("SortDataBy"),this.dataSorted;this.dataSorted=[],this.items.forEach(o=>{this.dataSorted.push(...o)}),this.dataSorted.sort((o,d)=>this.sortDataBy==="topSale"?d.sold-o.sold:this.sortDataBy==="lowToHight"?o.price-d.price:d.price-o.price);let s=[],e=[];return this.dataSorted.forEach((o,d)=>{e.push(o),(e.length===12||d===this.dataSorted.length-1)&&(s.push(e),e=[])}),this.dataSorted=[],this.dataSorted.push(...s),this.setBackgroundImage("SortDataBy"),s}},created(){this.retrieveItems(this.$route.fullPath.slice(9));const s=this.$route.query;this.showFilterText="",s.category&&(this.showFilterText=s.category+" "),(s.minPrice||s.minPrice===0)&&(s.maxPrice?this.showFilterText+=`[${s.minPrice}, ${s.maxPrice}] `:this.showFilterText+=` ${s.minPrice}+ `),s.size&&(this.showFilterText+=s.size),this.showFilterText&&(this.showFilterText="Lọc theo: "+this.showFilterText)}},c=s=>(B("data-v-6be1fb70"),s=s(),V(),s),L={class:"breadcrumb-option"},q={class:"container"},N={class:"row"},E={class:"col-lg-12"},A={class:"breadcrumb__text"},M=c(()=>t("h4",null,"Sản phẩm",-1)),K={class:"breadcrumb__links"},G=c(()=>t("span",null,"Sản phẩm",-1)),j={class:"shop spad"},H={class:"container"},Q={class:"row"},R={class:"col-lg-3"},X={class:"shop__sidebar"},J={class:"shop__sidebar__search"},W=c(()=>t("button",{type:"submit"},[t("span",{class:"icon_search"})],-1)),Y={class:"shop__sidebar__accordion"},Z={class:"shop__sidebar__accordion"},tt={class:"accordion",id:"accordionExample"},et={class:"card"},st=c(()=>t("div",{class:"card-heading active"},[t("a",{"data-toggle":"collapse","data-target":"#collapseOne",class:"","aria-expanded":"true"},"Thể loại")],-1)),it={id:"collapseOne",class:"collapse show","data-parent":"#accordionExample",style:{}},ot={class:"card-body"},at={class:"shop__sidebar__size"},rt={for:"dam"},lt={for:"vay"},nt={for:"dobo"},ht={for:"ao"},dt={class:"card"},ct=c(()=>t("div",{class:"card-heading"},[t("a",{"data-toggle":"collapse","data-target":"#collapseThree",class:"collapsed","aria-expanded":"false"},"Khoảng giá (VND)")],-1)),ut={id:"collapseThree",class:"collapse","data-parent":"#accordionExample",style:{}},_t={class:"card-body"},pt={class:"shop__sidebar__size"},gt={for:"gia1"},mt={for:"gia2"},vt={for:"gia3"},ft={for:"gia4"},yt={for:"gia5"},bt={for:"gia6"},Pt={class:"card"},wt=c(()=>t("div",{class:"card-heading"},[t("a",{"data-toggle":"collapse","data-target":"#collapseFour",class:"collapsed","aria-expanded":"false"},"Size")],-1)),xt={id:"collapseFour",class:"collapse","data-parent":"#accordionExample",style:{}},St={class:"card-body"},Ft={class:"shop__sidebar__size"},Ct={for:"s"},It={for:"m"},Tt={for:"l"},kt={for:"fs"},zt={key:0,class:"col-lg-9"},Bt={class:"shop__product__option"},Vt={class:"row"},Dt={class:"col-lg-6 col-md-6 col-sm-6"},$t={class:"shop__product__option__left"},Ot={class:"col-lg-6 col-md-6 col-sm-6"},Ut={class:"shop__product__option__right"},Lt=c(()=>t("p",null,"Sắp xếp theo:",-1)),qt=["value"],Nt={key:0,class:"row"},Et=["onClick"],At=["data-setbg"],Mt=c(()=>t("ul",{class:"product__hover"},[t("li",null,[t("a",null,[t("img",{src:w,alt:"Chi tiết"})])])],-1)),Kt=[Mt],Gt={class:"product__item__text"},jt={class:"add-cart"},Ht=D('<div class="product__color__select" data-v-6be1fb70><label for="pc-4" data-v-6be1fb70><input type="radio" id="pc-4" data-v-6be1fb70></label><label class="active black" for="pc-5" data-v-6be1fb70><input type="radio" id="pc-5" data-v-6be1fb70></label><label class="grey" for="pc-6" data-v-6be1fb70><input type="radio" id="pc-6" data-v-6be1fb70></label></div>',1),Qt={class:"row"},Rt={class:"col-lg-12"},Xt={class:"product__pagination"},Jt=["href"],Wt=c(()=>t("img",{src:$,alt:""},null,-1)),Yt=[Wt],Zt=["href"],te={key:1},ee=["href"],se=c(()=>t("img",{src:O,alt:""},null,-1)),ie=[se],oe={key:1,class:"col-lg-9"};function ae(s,e,o,d,_,m){const b=S("router-link");return n(),h(g,null,[t("section",L,[t("div",q,[t("div",N,[t("div",E,[t("div",A,[M,t("div",K,[F(b,{to:{name:"home"}},{default:C(()=>[r("Trang chủ")]),_:1}),G])])])])])]),t("section",j,[t("div",H,[t("div",Q,[t("div",R,[t("div",X,[t("div",J,[t("form",{onSubmit:e[1]||(e[1]=I(i=>this.findByText(),["prevent"]))},[a(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>this.searchText=i),placeholder:"Tìm kiếm..."},null,512),[[T,this.searchText]]),W],32)]),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[st,t("div",it,[t("div",ot,[t("div",at,[t("label",rt,[r("Đầm "),a(t("input",{type:"radio",id:"dam",value:"Đầm","onUpdate:modelValue":e[2]||(e[2]=i=>this.category=i)},null,512),[[l,this.category]])]),t("label",lt,[r("Váy "),a(t("input",{type:"radio",id:"vay",value:"Váy","onUpdate:modelValue":e[3]||(e[3]=i=>this.category=i)},null,512),[[l,this.category]])]),t("label",nt,[r("Đồ bộ "),a(t("input",{type:"radio",id:"dobo",value:"Đồ bộ","onUpdate:modelValue":e[4]||(e[4]=i=>this.category=i)},null,512),[[l,this.category]])]),t("label",ht,[r("Áo "),a(t("input",{type:"radio",id:"ao",value:"Áo","onUpdate:modelValue":e[5]||(e[5]=i=>this.category=i)},null,512),[[l,this.category]])])])])])]),t("div",dt,[ct,t("div",ut,[t("div",_t,[t("div",pt,[t("label",gt,[r("0 - 50.000 "),a(t("input",{type:"radio",id:"gia1",value:"0","onUpdate:modelValue":e[6]||(e[6]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])]),t("label",mt,[r("50.000 - 100.000 "),a(t("input",{type:"radio",id:"gia2",value:"1","onUpdate:modelValue":e[7]||(e[7]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])]),t("label",vt,[r("100.000 - 150.000 "),a(t("input",{type:"radio",id:"gia3",value:"2","onUpdate:modelValue":e[8]||(e[8]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])]),t("label",ft,[r("150.000 - 200.000"),a(t("input",{type:"radio",id:"gia4",value:"3","onUpdate:modelValue":e[9]||(e[9]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])]),t("label",yt,[r("200.000 - 250.000"),a(t("input",{type:"radio",id:"gia5",value:"4","onUpdate:modelValue":e[10]||(e[10]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])]),t("label",bt,[r("250.000 +"),a(t("input",{type:"radio",id:"gia6",value:"5","onUpdate:modelValue":e[11]||(e[11]=i=>this.priceFilter=i)},null,512),[[l,this.priceFilter]])])])])])]),t("div",Pt,[wt,t("div",xt,[t("div",St,[t("div",Ft,[t("label",Ct,[r("S (40-46Kg) "),a(t("input",{type:"radio",id:"s",value:"S","onUpdate:modelValue":e[12]||(e[12]=i=>this.size=i)},null,512),[[l,this.size]])]),t("label",It,[r("M (47-53Kg) "),a(t("input",{type:"radio",id:"m",value:"M","onUpdate:modelValue":e[13]||(e[13]=i=>this.size=i)},null,512),[[l,this.size]])]),t("label",Tt,[r("L (53-58Kg) "),a(t("input",{type:"radio",id:"l",value:"L","onUpdate:modelValue":e[14]||(e[14]=i=>this.size=i)},null,512),[[l,this.size]])]),t("label",kt,[r("Free Size (45-55Kg) "),a(t("input",{type:"radio",id:"fs",value:"Free Size","onUpdate:modelValue":e[15]||(e[15]=i=>this.size=i)},null,512),[[l,this.size]])])])])])]),t("button",{class:"btn-filter",onClick:e[16]||(e[16]=i=>this.applyFilter())}," Áp dụng bộ lọc"),t("button",{class:"btn-filter",onClick:e[17]||(e[17]=i=>this.clearFilter())}," Xoá tất cả bộ lọc ")])])])])]),this.hasData?(n(),h("div",zt,[t("div",Bt,[t("div",Vt,[t("div",Dt,[t("div",$t,[t("p",null,u(this.showFilterText),1)])]),t("div",Ot,[t("div",Ut,[Lt,a(t("select",{"onUpdate:modelValue":e[18]||(e[18]=i=>this.sortDataBy=i)},[(n(!0),h(g,null,v(this.optionsSortData,(i,p)=>(n(),h("option",{value:i.value,key:p},u(i.text),9,qt))),128))],512),[[k,this.sortDataBy]])])])])]),this.dataSorted[this.showPageCurrent-1]?(n(),h("div",Nt,[(n(!0),h(g,null,v(this.dataSorted[this.showPageCurrent-1],(i,p)=>(n(),h("div",{class:"col-lg-3 col-md-4 col-sm-6 col-6",key:p},[t("div",{class:"product__item",onClick:re=>this.goDetailItem(i._id)},[t("div",{class:"product__item__pic set-bg","data-setbg":i.image[0],lazy:""},Kt,8,At),t("div",Gt,[t("h6",null,u(i.title),1),t("a",jt,u(i.title),1),t("h5",null,u(m.formatter(i.price)),1),Ht])],8,Et)]))),128))])):z("",!0),t("div",Qt,[t("div",Rt,[t("div",Xt,[t("a",{href:"#page"+(this.showPageCurrent-1),class:f({disable:m.disablePreviousButton})},Yt,10,Jt),(n(!0),h(g,null,v(m.pageLinks,(i,p)=>(n(),h(g,{key:p},[i!=="..."?(n(),h("a",{key:0,href:"#page"+i,class:f([{active:i==this.showPageCurrent},"num-page"])},u(i),11,Zt)):(n(),h("a",te,u(i),1))],64))),128)),t("a",{href:"#page"+(this.showPageCurrent+1),class:f({disable:m.disableNextButton})},ie,10,ee)])])])])):(n(),h("div",oe,[t("p",null,u(_.isLoading?"Đang tải sản phẩm...":"Không tìm thấy sản phẩm nào !"),1)]))])])])],64)}const he=x(U,[["render",ae],["__scopeId","data-v-6be1fb70"]]);export{he as default};
